<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ä¿‚æ•°ä¸€æ‹¬è¨ˆç®—æ©Ÿï¼ˆã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ä»˜ããƒ»ã‚¤ãƒ³ãƒè‡ªå‹•å¤‰æ›ï¼‰</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .flex { display: flex; gap: 10px; }
    textarea {
      width: 100%; height: 200px;
      font-family: monospace;
      white-space: pre;
    }
    .label { font-weight: bold; margin-bottom: 5px; display: block; }
    #output { height: 250px; }
    button { margin-top: 10px; padding: 8px 16px; }
    .copy-btn { background-color: #4CAF50; color: white; border: none; cursor: pointer; }
    .copy-btn:hover { background-color: #45a049; }
  </style>
</head>
<body>
  <h1>ğŸ”§ ä¿‚æ•°ä¸€æ‹¬è¨ˆç®—æ©Ÿï¼ˆã‚¤ãƒ³ãƒè‡ªå‹•å¤‰æ›ï¼‹ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ä»˜ãï¼‰</h1>
  <p>ç¸¦ã«å…¥åŠ›ï¼ˆè¡Œæ•°ã‚’æƒãˆã¦ãã ã•ã„ï¼‰â€»å‘¼ã³å¾„ã¯ã€Œ1 1/4ã€ã‚„ã€Œ3/8ã€ãªã©åˆ†æ•°ã‚‚OK</p>

  <div class="flex">
    <div style="flex: 1;">
      <label class="label">â‘  ãƒ•ãƒ©ãƒ³ã‚¸é‡é‡ (kg)</label>
      <textarea id="flangeWeights" placeholder="12.5\n8.3\n15.6"></textarea>
    </div>
    <div style="flex: 1;">
      <label class="label">â‘¡ 1mé‡é‡ (kg/m)</label>
      <textarea id="pipeWeights" placeholder="28.4\n18.6\n35.2"></textarea>
    </div>
    <div style="flex: 1;">
      <label class="label">â‘¢ å‘¼ã³å¾„ï¼ˆã‚¤ãƒ³ãƒï¼‰</label>
      <textarea id="inches" placeholder="1 1/4\n2\n3/4"></textarea>
    </div>
  </div>

  <button onclick="calculate()">è¨ˆç®—ã™ã‚‹</button>

  <label class="label" style="margin-top: 20px;">ğŸ“‹ å‡ºåŠ›ï¼ˆä¿‚æ•°ã®ã¿ï¼‰</label>
  <textarea id="output" readonly placeholder="ã“ã“ã«ä¿‚æ•°ãŒå‡ºåŠ›ã•ã‚Œã¾ã™"></textarea>
  <button class="copy-btn" onclick="copyOutput()">ğŸ“‹ ä¸€æ‹¬ã‚³ãƒ”ãƒ¼</button>

  <script>
    function parseInchString(str) {
      str = str.trim();
      if (!str) return NaN;
      // å¸¯åˆ†æ•°ï¼ˆä¾‹ï¼š1 1/4ï¼‰
      if (str.includes(' ')) {
        const [whole, frac] = str.split(' ');
        const [num, denom] = frac.split('/');
        return parseFloat(whole) + (parseFloat(num) / parseFloat(denom));
      }
      // åˆ†æ•°ã®ã¿ï¼ˆä¾‹ï¼š3/4ï¼‰
      if (str.includes('/')) {
        const [num, denom] = str.split('/');
        return parseFloat(num) / parseFloat(denom);
      }
      // æ™®é€šã®æ•°å­—
      return parseFloat(str);
    }

    function calculate() {
      const flanges = document.getElementById('flangeWeights').value.trim().split('\n').map(s => parseFloat(s.trim()));
      const pipes = document.getElementById('pipeWeights').value.trim().split('\n').map(s => parseFloat(s.trim()));
      const inchesRaw = document.getElementById('inches').value.trim().split('\n');
      const inches = inchesRaw.map(parseInchString);

      const output = document.getElementById('output');
      const rowCount = Math.min(flanges.length, pipes.length, inches.length);
      let result = '';

      for (let i = 0; i < rowCount; i++) {
        const fw = flanges[i], pw = pipes[i], inch = inches[i];
        if (isNaN(fw) || isNaN(pw) || isNaN(inch) || pw === 0 || inch === 0) continue;
        const factor = fw / pw / inch;
        result += factor.toFixed(10) + '\n';
      }

      output.value = result.trim();
    }

    function copyOutput() {
      const output = document.getElementById('output');
      output.select();
      document.execCommand('copy');
      alert('ä¿‚æ•°ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
    }
  </script>
</body>
</html>
